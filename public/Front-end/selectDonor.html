<!-- selectDonor.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Head content -->
  <link href="./CSS/selDon.css" rel="stylesheet">
</head>
<body>

  <h2>Select Donor</h2>

  <!-- Display the list of available donors -->
  <ul id="donorList">
    <!-- Donor details will be dynamically added here -->
  </ul>

  <!-- Form to allow the patient to select a donor -->
  <form id="selectDonorForm" action="/selectDonor" method="post">
    <label for="donorId">Select Donor:</label>
    <select id="donorId" name="donor_id" required>
      <!-- Options will be dynamically added here -->
    </select>

    <button type="submit">Select Donor</button>
  </form>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Extract donor details from query parameters
      const queryParams = new URLSearchParams(window.location.search);
      const donorDetailsString = queryParams.get('donorDetails');
      const donorDetails = JSON.parse(decodeURIComponent(donorDetailsString));

      // Display the list of available donors
      const donorList = document.getElementById('donorList');
      donorList.innerHTML = donorDetails.map(donor => `<li>${donor.donor_name} - ${donor.phone_no}</li>`).join('');

      // Populate the select options with available donors
      const donorSelect = document.getElementById('donorId');
      donorSelect.innerHTML = donorDetails.map(donor => `<option value="${donor.donor_id}">${donor.donor_name}</option>`).join('');
    });
  </script>

</body>
</html>
